golang 内存管理

1. golang 支持自动管理内存， 帮助golang的使用者分配内存以及回收垃圾，这样很多隐性的内存错误就被避免了。

2. 内存块是一段连续的内存段，并且它有不同的尺寸。在golang中，内存块需要管理很多类型的值，例如结构体，数组和切片

3. 通常，一个函数的参数和它的局部变量被分配在栈中。golang的使用者使用new和make来分配golang的动态内存块，new 通常用于结构体类型值的分配，通常只分配一个内存块。而make通常创建多个内存块用以存储map, slice类型的数据，并且会返回它们的饮用。使用make创建的值一般支持内建的append的函数来扩展内存，如果需要的话。

4. new 方法创建的内存可以在堆和栈上被分配，make 方法创建的内存在堆上被分配。

   局部变量和函数参数为什么要放在栈中？

   数据段中的数据所有人都可以访问吗？全局变量

   静态变量：程序执行前系统为之静态分配存储空间的一类变量。

   自动变量：程序运行中以动态获取存储空间的一些对象。

   5 个 数据段：

   ​	 代码段（只读段，大小确定）， 

   ​	 数据段（静态内存分配，初始全局变量，static修饰的静态变量，常量数据），

   ​	 BSS段（程序未初始化的全局变量的一块内存区域）,   

   ​     stack段 （保存函数的局部变量，参数，返回值，不包含static声明的静态变量）

   ​     Heap: 存放被动态分配的内存段，可动态扩张或者缩减

   堆栈的区别: 

       1. 栈由系统自动分配释放，无需手动控制；堆的申请和释放由程序员控制，容易内存泄露。
       1. 空间大小不同。每个进程拥有的栈的大小远远小于堆的大小，堆的理论大小为虚拟内存大小。
       1. 堆向上生长，内存地址由低到高。栈的生长方向向下，内存地址由低到高。

5. golang 使用mmap在堆上分配内存